var glacier={VERSION:"0.0.1"};glacier.colors={WHITE:16777215,SILVER:12632256,GRAY:8421504,BLACK:0,RED:16711680,MAROON:8388608,YELLOW:16776960,OLIVE:8421376,LIME:65280,GREEN:32768,AQUA:65535,TEAL:32896,BLUE:255,NAVY:128,FUSCIA:16711935,PURPLE:8388736},glacier.Matrix33=function(r){this.array=new Float32Array([1,0,0,0,1,0,0,0,1]),r&&this.assign(r)},glacier.Matrix33.prototype={assign:function(r){var a,t,i;if(r instanceof glacier.Matrix33)for(i in r.array)this.array[i]=r.array[i];else if(r instanceof glacier.Matrix44)for(t=0;3>t;++t)for(a=0;3>a;++a)this.array[3*t+a]=r.array[4*t+a];else if(r instanceof Array||r instanceof Float32Array)for(i in r)this.array[i]=r[i];else if("number"==typeof r)for(i in this.array)this.array[i]=r;else console.warn("Invalid parameter type for glacier.Matrix33.assign: "+typeof r+" (expected Matrix33, Matrix44, array or number)")},determinant:function(){return this.array[0]*(this.array[4]*this.array[8]-this.array[5]*this.array[7])-this.array[1]*(this.array[3]*this.array[8]-this.array[5]*this.array[6])+this.array[2]*(this.array[3]*this.array[7]-this.array[4]*this.array[6])},element:function(r,a){return this.array[3*r+a]},multiply:function(r){var a,t,i,y;if(r instanceof glacier.Matrix33)for(y=new Float32Array(9),a=0;3>a;++a)for(t=0;3>t;++t)y[3*a+t]=this.array[3*a+0]*r.array[0+t]+this.array[3*a+1]*r.array[3+t]+this.array[3*a+2]*r.array[6+t];else if(r instanceof glacier.Matrix44)y=new glacier.Matrix33(r),this.multiply(y);else if("number"==typeof r)for(i in this.array)this.array[i]*=r;else console.warn("Invalid parameter type for glacier.Matrix33.multiply: "+typeof r+" (expected Matrix33, Matrix44 or number)")},transpose:function(){var r;r=this.array[1],this.array[1]=this.array[3],this.array[3]=r,r=this.array[2],this.array[2]=this.array[6],this.array[6]=r,r=this.array[5],this.array[5]=this.array[7],this.array[7]=r},invert:function(){var r=new Float32Array([this.array[4]*this.array[8]-this.array[5]*this.array[7],this.array[2]*this.array[7]-this.array[1]*this.array[8],this.array[1]*this.array[5]-this.array[2]*this.array[4],this.array[5]*this.array[6]-this.array[3]*this.array[8],this.array[0]*this.array[8]-this.array[2]*this.array[6],this.array[2]*this.array[3]-this.array[0]*this.array[5],this.array[3]*this.array[7]-this.array[4]*this.array[6],this.array[1]*this.array[6]-this.array[0]*this.array[7],this.array[0]*this.array[4]-this.array[1]*this.array[3]]),a=this.array[0]*r[0]-this.array[1]*r[3]+this.array[2]*r[6];if(Math.abs(a)<Number.EPSILON)return!1;a=1/a;for(var t in r)this.array[t]=r[t]*a;return!0},toString:function(){return"[["+this.array[0]+", "+this.array[1]+", "+this.array[2]+"], ["+this.array[3]+", "+this.array[4]+", "+this.array[5]+"], ["+this.array[6]+", "+this.array[7]+", "+this.array[8]+"]]"}},glacier.Matrix44=function(r){this.array=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),r&&this.assign(r)},glacier.Matrix44.prototype={assign:function(r){var a,t,i;if(r instanceof glacier.Matrix33){for(t=0;3>t;++t)for(a=0;3>a;++a)this.array[4*t+a]=r.array[3*t+a];this.array[3]=this.array[7]=this.array[11]=0,this.array[12]=this.array[13]=this.array[14]=0,this.array[16]=1}else if(r instanceof glacier.Matrix44)for(i in r.array)this.array[i]=r.array[i];else if(r instanceof Array||r instanceof Float32Array)for(i in r)this.array[i]=r[i];else if("number"==typeof r)for(i in this.array)this.array[i]=r;else console.warn("Invalid parameter type for glacier.Matrix44.assign: "+typeof r+" (expected Matrix33, Matrix44, array or number)")},determinant:function(){var r=this.array[0]*this.array[5]-this.array[1]*this.array[4],a=this.array[0]*this.array[6]-this.array[2]*this.array[4],t=this.array[0]*this.array[7]-this.array[3]*this.array[4],i=this.array[1]*this.array[6]-this.array[2]*this.array[5],y=this.array[1]*this.array[7]-this.array[3]*this.array[5],s=this.array[2]*this.array[7]-this.array[3]*this.array[6],e=this.array[8]*this.array[13]-this.array[9]*this.array[12],h=this.array[8]*this.array[14]-this.array[10]*this.array[12],n=this.array[8]*this.array[15]-this.array[11]*this.array[12],o=this.array[9]*this.array[14]-this.array[11]*this.array[13],l=this.array[9]*this.array[15]-this.array[10]*this.array[13],c=this.array[10]*this.array[15]-this.array[11]*this.array[14];return r*c-a*l+t*o+i*n-y*h+s*e},element:function(r,a){return this.array[4*r+a]},multiply:function(){var r,a,t,i;if(value instanceof glacier.Matrix44)for(i=new Float32Array(16),r=0;4>r;++r)for(a=0;4>a;++a)i[4*r+a]=this.array[4*r+0]*value.array[0+a]+this.array[4*r+1]*value.array[4+a]+this.array[4*r+2]*value.array[8+a]+this.array[4*r+3]*value.array[12+a];else if(value instanceof glacier.Matrix33)i=new glacier.Matrix44(value),this.multiply(i);else if("number"==typeof value)for(t in this.array)this.array[t]*=value;else console.warn("Invalid parameter type for glacier.Matrix4.multiply: "+typeof value+" (expected Matrix44, Matrix33 or number)")},transpose:function(){var r;r=this.array[1],this.array[1]=this.array[4],this.array[4]=r,r=this.array[2],this.array[2]=this.array[8],this.array[8]=r,r=this.array[3],this.array[3]=this.array[12],this.array[12]=r,r=this.array[6],this.array[6]=this.array[9],this.array[9]=r,r=this.array[7],this.array[7]=this.array[13],this.array[13]=r,r=this.array[11],this.array[11]=this.array[14],this.array[14]=r},invert:function(){var r=this.array[0]*this.array[5]-this.array[1]*this.array[4],a=this.array[0]*this.array[6]-this.array[2]*this.array[4],t=this.array[0]*this.array[7]-this.array[3]*this.array[4],i=this.array[1]*this.array[6]-this.array[2]*this.array[5],y=this.array[1]*this.array[7]-this.array[3]*this.array[5],s=this.array[2]*this.array[7]-this.array[3]*this.array[6],e=this.array[8]*this.array[13]-this.array[9]*this.array[12],h=this.array[8]*this.array[14]-this.array[10]*this.array[12],n=this.array[8]*this.array[15]-this.array[11]*this.array[12],o=this.array[9]*this.array[14]-this.array[11]*this.array[13],l=this.array[9]*this.array[15]-this.array[10]*this.array[13],c=this.array[10]*this.array[15]-this.array[11]*this.array[14],u=r*c-a*l+t*o+i*n-y*h+s*e;return Math.abs(u)<Number.EPSILON?!1:(this.array=new Float32Array([this.array[5]*c-this.array[6]*l+this.array[7]*o,-this.array[1]*c+this.array[2]*l-this.array[3]*o,this.array[13]*s-this.array[14]*y+this.array[15]*i,-this.array[9]*s+this.array[10]*y-this.array[11]*i,-this.array[4]*c+this.array[6]*n-this.array[7]*h,this.array[0]*c-this.array[2]*n+this.array[3]*h,-this.array[12]*s+this.array[14]*t-this.array[15]*a,this.array[8]*s-this.array[10]*t+this.array[11]*a,this.array[4]*l-this.array[5]*n+this.array[7]*e,-this.array[0]*l+this.array[1]*n-this.array[3]*e,this.array[12]*y-this.array[13]*t+this.array[15]*r,-this.array[8]*y+this.array[9]*t-this.array[11]*r,-this.array[4]*o+this.array[5]*h-this.array[6]*e,this.array[0]*o-this.array[1]*h+this.array[2]*e,-this.array[12]*i+this.array[13]*a-this.array[14]*r,this.array[8]*i-this.array[9]*a+this.array[10]*r]),!0)},toString:function(){return"[["+this.array[0]+", "+this.array[1]+", "+this.array[2]+", "+this.array[3]+"], ["+this.array[4]+", "+this.array[5]+", "+this.array[6]+", "+this.array[7]+"], ["+this.array[8]+", "+this.array[9]+", "+this.array[10]+", "+this.array[11]+"], ["+this.array[12]+", "+this.array[13]+", "+this.array[14]+", "+this.array[15]+"]]"}},glacier.Vector2=function(r,a){this.array=new Float32Array(["number"==typeof r?r:0,"number"==typeof a?a:0])},glacier.Vector2.prototype={add:function(r){r instanceof glacier.Vector2?(this.array[0]+=r.array[0],this.array[1]+=r.array[1]):"number"==typeof r?(this.array[0]+=r,this.array[1]+=r):console.warn("Invalid parameter type for glacier.Vector2.add: "+typeof r+" (expected number or Vector2)")},assign:function(r,a){"number"==typeof r&&"number"==typeof a?(this.array[0]=r,this.array[1]=a):console.warn("Invalid parameter types for glacier.Vector2.assign: "+typeof r+", "+typeof a+" (expected two numbers)")},distance:function(r){return glacier.Vector2(this.array[0]-r.array[0],this.array[1]-r.array[1]).length()},divide:function(){value instanceof glacier.Vector2?(this.array[0]/=value.array[0],this.array[1]/=value.array[1]):"number"==typeof value?(this.array[0]/=value,this.array[1]/=value):console.warn("Invalid parameter type for glacier.Vector2.divide: "+typeof value+" (expected number or Vector2)")},dotProduct:function(r){return this.array[0]*r.array[0]+this.array[1]*r.array[1]},length:function(){return Math.sqrt(this.array[0]*this.array[0]+this.array[1]*this.array[1])},multiply:function(r){r instanceof glacier.Vector2?(this.array[0]*=r.array[0],this.array[1]*=r.array[1]):"number"==typeof r?(this.array[0]*=r,this.array[1]*=r):console.warn("Invalid parameter type for glacier.Vector2.multiply: "+typeof r+" (expected number or Vector2)")},normalize:function(){var r=1/this.length();this.array[0]*=r,this.array[1]*=r},rotate:function(r){var a=Math.cos(r),t=Math.sin(r);this.array[0]=this.array[0]*a-this.array[1]*t,this.array[1]=this.array[0]*t+this.array[1]*a},subtract:function(r){r instanceof glacier.Vector2?(this.array[0]-=r.array[0],this.array[1]-=r.array[1]):"number"==typeof r?(this.array[0]-=r,this.array[1]-=r):console.warn("Invalid parameter type for glacier.Vector2.subtract: "+typeof r+" (expected number or Vector2)")},toString:function(){return"("+this.array[0]+", "+this.array[1]+")"},x:function(){return this.array[0]},y:function(){return this.array[1]},u:function(){return this.array[0]},v:function(){return this.array[1]}},glacier.Vector3=function(r,a,t){this.array=new Float32Array(["number"==typeof r?r:0,"number"==typeof a?a:0,"number"==typeof t?t:0])},glacier.Vector3.prototype={add:function(r){r instanceof glacier.Vector3?(this.array[0]+=r.array[0],this.array[1]+=r.array[1],this.array[2]+=r.array[2]):"number"==typeof r?(this.array[0]+=r,this.array[1]+=r,this.array[2]+=r):console.warn("Invalid parameter type for glacier.Vector3.add: "+typeof r+" (expected number or Vector3)")},angle:function(r){var a=Math.acos(this.dotProduct(r)/(this.length()*r.length()));return isNaN(a)?0:a},assign:function(r,a,t){"number"==typeof r&&"number"==typeof a&&"number"==typeof t?(this.array[0]=r,this.array[1]=a,this.array[2]=t):console.warn("Invalid parameter types for glacier.Vector.assign: "+typeof r+", "+typeof a+", "+typeof t+" (expected three numbers)")},crossProduct:function(r){return new glacier.Vector3(this.array[1]*r.array[2]-this.array[2]*r.array[1],this.array[2]*r.array[0]-this.array[0]*r.array[2],this.array[0]*r.array[1]-this.array[1]*r.array[0])},distance:function(r){return glacier.Vector3(this.array[0]-r.array[0],this.array[1]-r.array[1],this.array[2]-r.array[2]).length()},divide:function(){value instanceof glacier.Vector3?(this.array[0]/=value.array[0],this.array[1]/=value.array[1],this.array[2]/=value.array[2]):"number"==typeof value?(this.array[0]/=value,this.array[1]/=value,this.array[2]/=value):value instanceof glacier.Matrix33?(this.array[0]=this.array[0]/value.element(0,0)+this.array[1]/value.element(0,1)+this.array[2]/value.element(0,2),this.array[1]=this.array[0]/value.element(1,0)+this.array[1]/value.element(1,1)+this.array[2]/value.element(1,2),this.array[2]=this.array[0]/value.element(2,0)+this.array[1]/value.element(2,1)+this.array[2]/value.element(2,2)):value instanceof glacier.Matrix44?(this.array[0]=this.array[0]/value.element(0,0)+this.array[1]/value.element(0,1)+this.array[2]/value.element(0,2)+value.element(0,3),this.array[1]=this.array[0]/value.element(1,0)+this.array[1]/value.element(1,1)+this.array[2]/value.element(1,2)+value.element(1,3),this.array[2]=this.array[0]/value.element(2,0)+this.array[1]/value.element(2,1)+this.array[2]/value.element(2,2)+value.element(2,3)):console.warn("Invalid parameter type for glacier.Vector3.divide: "+typeof value+" (expected number, Vector3, Matrix33 or Matrix44)")},dotProduct:function(r){return this.array[0]*r.array[0]+this.array[1]*r.array[1]+this.array[2]*r.array[2]},length:function(){return Math.sqrt(this.array[0]*this.array[0]+this.array[1]*this.array[1]+this.array[2]*this.array[2])},multiply:function(r){r instanceof glacier.Vector3?(this.array[0]*=r.array[0],this.array[1]*=r.array[1],this.array[2]*=r.array[2]):"number"==typeof r?(this.array[0]*=r,this.array[1]*=r,this.array[2]*=r):r instanceof glacier.Matrix33?(this.array[0]=this.array[0]*r.element(0,0)+this.array[1]*r.element(0,1)+this.array[2]*r.element(0,2),this.array[1]=this.array[0]*r.element(1,0)+this.array[1]*r.element(1,1)+this.array[2]*r.element(1,2),this.array[2]=this.array[0]*r.element(2,0)+this.array[1]*r.element(2,1)+this.array[2]*r.element(2,2)):r instanceof glacier.Matrix44?(this.array[0]=this.array[0]*r.element(0,0)+this.array[1]*r.element(0,1)+this.array[2]*r.element(0,2)+r.element(0,3),this.array[1]=this.array[0]*r.element(1,0)+this.array[1]*r.element(1,1)+this.array[2]*r.element(1,2)+r.element(1,3),this.array[2]=this.array[0]*r.element(2,0)+this.array[1]*r.element(2,1)+this.array[2]*r.element(2,2)+r.element(2,3)):console.warn("Invalid parameter type for glacier.Vector3.multiply: "+typeof r+" (expected number, Vector3, Matrix33 or Matrix44)")},normalize:function(){var r=1/this.length();this.array[0]*=r,this.array[1]*=r,this.array[2]*=r},rotateX:function(r){var a=Math.cos(r),t=Math.sin(r);this.array[1]=this.array[1]*a-this.array[2]*t,this.array[2]=this.array[1]*t+this.array[2]*a},rotateY:function(r){var a=Math.cos(r),t=Math.sin(r);this.array[0]=this.array[0]*a-this.array[2]*t,this.array[2]=this.array[0]*t-this.array[2]*a},rotateZ:function(r){var a=Math.cos(r),t=Math.sin(r);this.array[0]=this.array[0]*a-this.array[1]*t,this.array[1]=this.array[0]*t+this.array[1]*a},subtract:function(r){r instanceof glacier.Vector3?(this.array[0]-=r.array[0],this.array[1]-=r.array[1],this.array[2]-=r.array[2]):"number"==typeof r?(this.array[0]-=r,this.array[1]-=r,this.array[2]-=r):console.warn("Invalid parameter type for glacier.Vector3.subtract: "+typeof r+" (expected number or Vector3)")},toString:function(){return"("+this.array[0]+", "+this.array[1]+", "+this.array[2]+")"},x:function(){return this.array[0]},y:function(){return this.array[1]},z:function(){return this.array[2]},u:function(){return this.array[0]},v:function(){return this.array[1]},w:function(){return this.array[2]}};