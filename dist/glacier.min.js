var glacier={};!function(r){var t;Object.defineProperties(r,{VERSION:{value:"0.0.2",writable:!1},language:{get:function(){return t},set:function(e){if(r.i18n[e])t=e;else{var a=r.i18n.alias[e]?r.i18n.alias[e][0]:null;t=r.i18n[a]?a:"en",r.error("UNDEFINED_LANGUAGE",{language:e,fallback:t})}}}}),r.error=function(t,e){var a,i=r.i18n(t);if(i||(i=r.i18n("UNDEFINED_ERROR"),e={error:t}),"object"==typeof e&&(a=i.match(/\{[^\}]*\}/g)))for(var s in a){var n=a[s].substr(1,a[s].length-2);e.hasOwnProperty(n)&&(i=i.replace(a[s],e[n]))}console.error(i)},r.isArray=function(r){return r instanceof Array||r instanceof Float32Array},r.union=function(t,e){function a(a){Object.defineProperty(this,t[a],{get:function(){return e},set:function(i){typeof i==typeof e?e=i:r.error("INVALID_ASSIGNMENT",{variable:t[a],value:typeof i,expected:typeof e})}})}t=t instanceof Array?t:[t];for(var i in t)a.call(this,i)},"object"==typeof module&&(module.exports=r)}(glacier),glacier.Color=function(r){var t,e,a,i=255;if(Object.defineProperties(this,{r:{get:function(){return i>>24&255},set:function(r){"number"==typeof r&&r>=0&&255>=r?i=((255&r)<<24)+(16777215&i)>>>0:glacier.error("INVALID_ASSIGNMENT",{variable:"Color.r",value:r,expected:"number between 0 and 255"})}},g:{get:function(){return i>>16&255},set:function(r){"number"==typeof r&&r>=0&&255>=r?i=((255&r)<<16)+(4278255615&i)>>>0:glacier.error("INVALID_ASSIGNMENT",{variable:"Color.g",value:r,expected:"number between 0 and 255"})}},b:{get:function(){return i>>8&255},set:function(r){"number"==typeof r&&r>=0&&255>=r?i=((255&r)<<8)+(4294902015&i)>>>0:glacier.error("INVALID_ASSIGNMENT",{variable:"Color.b",value:r,expected:"number between 0 and 255"})}},a:{get:function(){return(i>>0&255)/255},set:function(r){"number"==typeof r&&r>=0&&1>=r?i=((255*r&255)<<0)+(4294967040&i)>>>0:glacier.error("INVALID_ASSIGNMENT",{variable:"Color.a",value:r,expected:"number between 0.0 and 1.0"})}},rgb:{get:function(){return i>>8&16777215},set:function(r){if("number"==typeof r&&r>=0&&16777215>=r)i=((16777215&r)<<8)+(255&i)>>>0;else if(glacier.isArray(r)){for(t=0,a=[];t<r.length&&("number"==typeof r[t]&&r[t]>=0&&r[t]<=1);++t)a.push(r[t]);3==a.length?this.rgb=(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]>>>0:glacier.error("INVALID_ASSIGNMENT",{variable:"Color.rgb",value:"["+r.join(", ")+"]",expected:"array[3] of numbers between 0.0 and 1.0"})}else r="number"==typeof r?"0x"+r.toString(16).toUpperCase():r,glacier.error("INVALID_ASSIGNMENT",{variable:"Color.rgb",value:r,expected:"RGB as 24-bits integer or array[3] of numbers between 0.0 and 1.0"})}},rgba:{get:function(){return i},set:function(r){if("number"==typeof r&&r>=0&&4294967295>=r)i=(4294967295&r)>>>0;else if(glacier.isArray(r)){for(t=0,a=[];t<r.length&&("number"==typeof r[t]&&r[t]>=0&&r[t]<=1);++t)a.push(r[t]);4==a.length?this.rgba=(255*a[0]<<24)+(255*a[1]<<16)+(255*a[2]<<8)+255*a[3]>>>0:glacier.error("INVALID_ASSIGNMENT",{variable:"Color.rgba",value:"["+r.join(", ")+"]",expected:"array[4] of numbers between 0.0 and 1.0"})}else r="number"==typeof r?"0x"+r.toString(16).toUpperCase():r,glacier.error("INVALID_ASSIGNMENT",{variable:"Color.rgba",value:r,expected:"RGBA as 32-bits integer or array[4] of numbers between 0.0 and 1.0"})}}}),r instanceof glacier.Color)this.rgba=r.rgba;else if(glacier.isArray(r))this.rgba=r;else switch((e=arguments).length){case 1:this.rgb=e[0];break;case 2:this.rgb=e[0],this.a=e[1];break;case 3:case 4:for(t=0,a=[];t<e.length;++t){if("number"!=typeof e[t])return void glacier.error("INVALID_PARAMETER",{parameter:e[t],expected:"number",method:"Color constructor"});a.push(e[t]/(3>t?255:1))}for(;a.length<4;)a.push(1);this.rgba=a}},glacier.Color.prototype={toArray:function(){return new Float32Array([this.r/255,this.g/255,this.b/255,this.a])},toString:function(){return"rgba("+[this.r,this.g,this.b,this.a.toFixed(2)].join(", ")+")"}},glacier.color={},Object.defineProperties(glacier.color,{WHITE:{get:function(){return new glacier.Color(16777215,1)}},SILVER:{get:function(){return new glacier.Color(12632256,1)}},GRAY:{get:function(){return new glacier.Color(8421504,1)}},BLACK:{get:function(){return new glacier.Color(0,1)}},RED:{get:function(){return new glacier.Color(16711680,1)}},MAROON:{get:function(){return new glacier.Color(8388608,1)}},YELLOW:{get:function(){return new glacier.Color(16776960,1)}},OLIVE:{get:function(){return new glacier.Color(8421376,1)}},LIME:{get:function(){return new glacier.Color(65280,1)}},GREEN:{get:function(){return new glacier.Color(32768,1)}},AQUA:{get:function(){return new glacier.Color(65535,1)}},TEAL:{get:function(){return new glacier.Color(32896,1)}},BLUE:{get:function(){return new glacier.Color(255,1)}},NAVY:{get:function(){return new glacier.Color(128,1)}},FUCHSIA:{get:function(){return new glacier.Color(16711935,1)}},PURPLE:{get:function(){return new glacier.Color(8388736,1)}}}),glacier.context={},glacier.Context=function(r,t){var e,a=[];if("string"==typeof r)for(e in glacier.context)if(glacier.context.hasOwnProperty(e)){if(e.toLowerCase()==r.toLowerCase())return"string"==typeof t&&(t={container:t}),new glacier.context[e](t);a.push(e)}a=a.join(", ");var i=a.lastIndexOf(", ");return a=i>=0?a.substr(0,i)+" or"+a.substr(i+1):a,glacier.error("INVALID_PARAMETER",{parameter:"type",expected:a,method:"Context constructor"}),null},glacier.i18n=function(r,t){if(t=t||glacier.language,glacier.i18n[t]&&glacier.i18n[t][r])return glacier.i18n[t][r];if(glacier.i18n.alias[t])for(var e in glacier.i18n.alias[t]){var a=glacier.i18n.alias[t][e];if(glacier.i18n[a]&&glacier.i18n[a][r])return glacier.i18n[a][r]}return glacier.i18n.en[r]||null},glacier.i18n.alias={no:["nb","nn"],nb:["nn"],nn:["nb"]},glacier.EPSILON=1e-4,glacier.compare=function(r,t){var e,a=glacier.isArray(r),i=glacier.isArray(t);if(!a||!i){if(a||i){var s=a?r:t,n=a?t:r;for(e=0;e<s.length;++e)if("number"==typeof s[e]&&"number"==typeof n){if(Math.abs(s[e]-n)>=glacier.EPSILON)return!1}else if(s[e]!==n)return!1;return!0}return"number"==typeof r&&"number"==typeof t?Math.abs(r-t)<glacier.EPSILON:r===t}if(r.length==t.length){for(e=0;e<r.length;++e)if("number"==typeof r[e]&&"number"==typeof t[e]){if(Math.abs(r[e]-t[e])>=glacier.EPSILON)return!1}else if(r!==t)return!1;return!0}return!1},glacier.context.WebGL=function(r){r="object"==typeof r?r:{};var t,e,a,i;r.container instanceof HTMLElement?a=r.container:"string"==typeof r.container?(a=document.getElementById(r.container))||glacier.error("UNDEFINED_ELEMENT",{element:r.container,method:"WebGL Context constructor"}):glacier.error("MISSING_PARAMETER",{parameter:"container",method:"WebGL Context constructor"}),a instanceof HTMLCanvasElement?e=a:a instanceof HTMLElement&&(e=document.createElement("CANVAS"),e.style.position="relative;",e.style.width="100%",e.style.height="100%",a.appendChild(e)),e instanceof HTMLCanvasElement&&(Object.defineProperty(this,"canvas",{value:e,writable:!1}),this.canvas.width=e.offsetWidth,this.canvas.height=e.offsetHeight,window.addEventListener("resize",function(){(e.width!=e.offsetWidth||e.height!=e.offsetHeight)&&this.resize(e.offsetWidth,e.offsetHeight)}.bind(this)),(i=this.canvas.getContext("webgl"))&&Object.defineProperty(this,"gl",{value:i,writable:!1}),this.gl&&(Object.defineProperty(this,"background",{get:function(){return t},set:function(r){r instanceof glacier.Color?(t=r,this.gl.clearColor(r.r,r.g,r.b,r.a)):glacier.error("INVALID_ASSIGNMENT",{variable:"Context.background",value:typeof r,expected:"Color"})}}),this.background=glacier.color.BLACK),this.clear())},glacier.context.WebGL.prototype={clear:function(){this.gl&&this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)},resize:function(r,t){return"number"!=typeof r?void glacier.error("INVALID_PARAMETER",{parameter:"width",expected:"number",method:"Context resize"}):"number"!=typeof t?void glacier.error("INVALID_PARAMETER",{parameter:"height",expected:"number",method:"Context resize"}):(this.canvas&&(this.canvas.width=r,this.canvas.height=t),void(this.gl&&this.gl.viewport(0,0,r,t)))}},glacier.Sphere=function(r,t,e){this.vertices=[],this.indices=[],this.normals=[],this.uvCoords=[],this.latitudes="number"==typeof r?Math.Max(Math.abs(r),3):6,this.longitudes="number"==typeof t?Math.Max(Math.abs(t),3):6,this.radius="number"==typeof e?Math.abs(this.radius):1;var a,i;for(a=0;a<=this.latitudes;++a){var s=a*(Math.PI/this.latitudes),n=Math.sin(s),h=Math.cos(s);for(i=0;i<=this.longitudes;++i){var o=2*i*(Math.PI/this.latitudes),y=Math.sin(o),c=Math.cos(o),l=c*n,u=h,f=y*n,g=1-i/this.longitudes,m=a/this.latitudes;this.vertices.push(this.radius*l,this.radius*u,this.radius*f),this.normals.push(l,u,f),this.uvCoords.push(g,m)}}for(a=0;a<this.latitudes;++a)for(i=0;i<this.longitudes;++i){var p=a*(this.longitudes+1)+i,d=p+this.longitudes+1;this.indices.push(p,d,p+1),this.indices.push(d,d+1,p+1)}},glacier.i18n.en={INDEX_OUT_OF_RANGE:"Index out of range: {index} (expected range {range}) in {method}",INVALID_ASSIGNMENT:"Invalid assigment of {variable}: {value} (expected {expected})",INVALID_PARAMETER:"Invalid parameter: {parameter} (expected {expected}) in {method}",MATRIX_NO_INVERSE:"Inverse matrix does not exist: {matrix} in {method}",MISSING_PARAMETER:"Missing mandatory parameter: {parameter} in {method}",UNDEFINED_ELEMENT:"Undefined element ID: {element} in {method}",UNDEFINED_ERROR:"Undefined error: {error}",UNDEFINED_LANGUAGE:"Undefined language: {language} (using {fallback} as fallback)"},glacier.i18n.nb={INDEX_OUT_OF_RANGE:"Index out of range: {index} (expected range {range}) in {method}",INVALID_ASSIGNMENT:"Ugyldig tildeing av {variable}: {value} (forventet {expected})",INVALID_PARAMETER:"Ugyldig parameter: {parameter} (forventet {expected}) i {method}",MATRIX_NO_INVERSE:"Invers matrise eksisterer ikke: {matrix} i {method}",MISSING_PARAMETER:"Mangler obligatorisk parameter: {parameter} i {method}",UNDEFINED_ELEMENT:"Udefinert element ID: {element} i {method}",UNDEFINED_ERROR:"Udefinert feilmelding: {error}",UNDEFINED_LANGUAGE:"Udefinert sprÃ¥kkode: {language} (bruker {fallback})"},glacier.Matrix33=function(r){this.array=new Float32Array([1,0,0,0,1,0,0,0,1]),r&&this.assign(r)},glacier.Matrix33.prototype={assign:function(r){var t,e,a;if(r instanceof glacier.Matrix33)for(a in r.array)this.array[a]=r.array[a];else if(r instanceof glacier.Matrix44)for(e=0;3>e;++e)for(t=0;3>t;++t)this.array[3*e+t]=r.array[4*e+t];else if(glacier.isArray(r)&&9==r.length)for(a=0;a<r.length;++a)this.array[a]=r[a];else if("number"==typeof r)for(a in this.array)this.array[a]=r;else glacier.error("INVALID_PARAMETER",{parameter:typeof r,expected:"number, Matrix33, Matrix44 or array[9]",method:"Matrix33.assign"});return this},determinant:function(){return this.array[0]*(this.array[4]*this.array[8]-this.array[5]*this.array[7])-this.array[1]*(this.array[3]*this.array[8]-this.array[5]*this.array[6])+this.array[2]*(this.array[3]*this.array[7]-this.array[4]*this.array[6])},element:function(r,t){if("number"==typeof t&&"number"==typeof r){if(t>=0&&3>=t&&r>=0&&3>=r)return this.array[3*r+t]}else if("number"==typeof r)return this.array[r];return void glacier.error("INDEX_OUT_OF_RANGE",{index:r+(t||0),range:"0-9",method:"Matrix33.element"})},multiply:function(r){var t,e,a,i;if(r instanceof glacier.Matrix33){for(i=new Float32Array(9),t=0;3>t;++t)for(e=0;3>e;++e)i[3*t+e]=this.array[3*t+0]*r.array[0+e]+this.array[3*t+1]*r.array[3+e]+this.array[3*t+2]*r.array[6+e];this.array=i}else if(r instanceof glacier.Matrix44)i=new glacier.Matrix33(r),this.multiply(i);else if("number"==typeof r)for(a in this.array)this.array[a]*=r;else glacier.error("INVALID_PARAMETER",{parameter:typeof r,expected:"number, Matrix33 or Matrix44",method:"Matrix33.multiply"});return this},transpose:function(){var r;return r=this.array[1],this.array[1]=this.array[3],this.array[3]=r,r=this.array[2],this.array[2]=this.array[6],this.array[6]=r,r=this.array[5],this.array[5]=this.array[7],this.array[7]=r,this},transposed:function(){var r=new glacier.Matrix33(this);return r.transpose()},inverse:function(){var r=new glacier.Matrix33(this);return r.invert()?r:void glacier.error("MATRIX_NO_INVERSE",{matrix:r.toString(),method:"Matrix33.inverse"})},invert:function(){var r=new Float32Array([this.array[4]*this.array[8]-this.array[5]*this.array[7],this.array[2]*this.array[7]-this.array[1]*this.array[8],this.array[1]*this.array[5]-this.array[2]*this.array[4],this.array[5]*this.array[6]-this.array[3]*this.array[8],this.array[0]*this.array[8]-this.array[2]*this.array[6],this.array[2]*this.array[3]-this.array[0]*this.array[5],this.array[3]*this.array[7]-this.array[4]*this.array[6],this.array[1]*this.array[6]-this.array[0]*this.array[7],this.array[0]*this.array[4]-this.array[1]*this.array[3]]),t=this.array[0]*r[0]+this.array[1]*r[3]+this.array[2]*r[6];if(glacier.compare(t,0))return!1;t=1/t;for(var e=0;e<r.length;++e)this.array[e]=r[e]*t;return!0},toArray:function(){return new Float32Array(this.array)},toString:function(){return"[["+this.array[0].toPrecision(5)+", "+this.array[1].toPrecision(5)+", "+this.array[2].toPrecision(5)+"], ["+this.array[3].toPrecision(5)+", "+this.array[4].toPrecision(5)+", "+this.array[5].toPrecision(5)+"], ["+this.array[6].toPrecision(5)+", "+this.array[7].toPrecision(5)+", "+this.array[8].toPrecision(5)+"]]"}},glacier.Matrix44=function(r){this.array=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),r&&this.assign(r)},glacier.Matrix44.prototype={assign:function(r){var t,e,a;if(r instanceof glacier.Matrix33){for(e=0;3>e;++e)for(t=0;3>t;++t)this.array[4*e+t]=r.array[3*e+t];this.array[3]=this.array[7]=this.array[11]=0,this.array[12]=this.array[13]=this.array[14]=0,this.array[16]=1}else if(r instanceof glacier.Matrix44)for(a in r.array)this.array[a]=r.array[a];else if(glacier.isArray(r)&&16==r.length)for(a=0;a<r.length;++a)this.array[a]=r[a];else if("number"==typeof r)for(a in this.array)this.array[a]=r;else glacier.error("INVALID_PARAMETER",{parameter:typeof r,expected:"number, Matrix33, Matrix44 or array[16]",method:"Matrix44.assign"});return this},determinant:function(){var r=this.array[0]*this.array[5]-this.array[1]*this.array[4],t=this.array[0]*this.array[6]-this.array[2]*this.array[4],e=this.array[0]*this.array[7]-this.array[3]*this.array[4],a=this.array[1]*this.array[6]-this.array[2]*this.array[5],i=this.array[1]*this.array[7]-this.array[3]*this.array[5],s=this.array[2]*this.array[7]-this.array[3]*this.array[6],n=this.array[8]*this.array[13]-this.array[9]*this.array[12],h=this.array[8]*this.array[14]-this.array[10]*this.array[12],o=this.array[8]*this.array[15]-this.array[11]*this.array[12],y=this.array[9]*this.array[14]-this.array[10]*this.array[13],c=this.array[9]*this.array[15]-this.array[11]*this.array[13],l=this.array[10]*this.array[15]-this.array[11]*this.array[14];return r*l-t*c+e*y+a*o-i*h+s*n},element:function(r,t){if("number"==typeof t&&"number"==typeof r){if(t>=0&&4>=t&&r>=0&&4>=r)return this.array[4*r+t]}else if("number"==typeof r)return this.array[r];return void glacier.error("INDEX_OUT_OF_RANGE",{index:r+(t||0),range:"0-16",method:"Matrix44.element"})},multiply:function(r){var t,e,a,i;if(r instanceof glacier.Matrix44){for(i=new Float32Array(16),t=0;4>t;++t)for(e=0;4>e;++e)i[4*t+e]=this.array[4*t+0]*r.array[0+e]+this.array[4*t+1]*r.array[4+e]+this.array[4*t+2]*r.array[8+e]+this.array[4*t+3]*r.array[12+e];this.array=i}else if(r instanceof glacier.Matrix33)i=new glacier.Matrix44(r),this.multiply(i);else if("number"==typeof r)for(a in this.array)this.array[a]*=r;else glacier.error("INVALID_PARAMETER",{parameter:typeof r,expected:"number, Matrix33 or Matrix44",method:"Matrix44.multiply"});return this},transpose:function(){var r;return r=this.array[1],this.array[1]=this.array[4],this.array[4]=r,r=this.array[2],this.array[2]=this.array[8],this.array[8]=r,r=this.array[3],this.array[3]=this.array[12],this.array[12]=r,r=this.array[6],this.array[6]=this.array[9],this.array[9]=r,r=this.array[7],this.array[7]=this.array[13],this.array[13]=r,r=this.array[11],this.array[11]=this.array[14],this.array[14]=r,this},transposed:function(){var r=new glacier.Matrix44(this);return r.transpose()},inverse:function(){var r=new glacier.Matrix44(this);return r.invert()?r:void glacier.error("MATRIX_NO_INVERSE",{matrix:r.toString(),method:"Matrix44.inverse"})},invert:function(){var r=this.array[0]*this.array[5]-this.array[1]*this.array[4],t=this.array[0]*this.array[6]-this.array[2]*this.array[4],e=this.array[0]*this.array[7]-this.array[3]*this.array[4],a=this.array[1]*this.array[6]-this.array[2]*this.array[5],i=this.array[1]*this.array[7]-this.array[3]*this.array[5],s=this.array[2]*this.array[7]-this.array[3]*this.array[6],n=this.array[8]*this.array[13]-this.array[9]*this.array[12],h=this.array[8]*this.array[14]-this.array[10]*this.array[12],o=this.array[8]*this.array[15]-this.array[11]*this.array[12],y=this.array[9]*this.array[14]-this.array[10]*this.array[13],c=this.array[9]*this.array[15]-this.array[11]*this.array[13],l=this.array[10]*this.array[15]-this.array[11]*this.array[14],u=r*l-t*c+e*y+a*o-i*h+s*n;if(glacier.compare(u,0))return!1;var f=new Float32Array([this.array[5]*l-this.array[6]*c+this.array[7]*y,-this.array[1]*l+this.array[2]*c-this.array[3]*y,this.array[13]*s-this.array[14]*i+this.array[15]*a,-this.array[9]*s+this.array[10]*i-this.array[11]*a,-this.array[4]*l+this.array[6]*o-this.array[7]*h,this.array[0]*l-this.array[2]*o+this.array[3]*h,-this.array[12]*s+this.array[14]*e-this.array[15]*t,this.array[8]*s-this.array[10]*e+this.array[11]*t,this.array[4]*c-this.array[5]*o+this.array[7]*n,-this.array[0]*c+this.array[1]*o-this.array[3]*n,this.array[12]*i-this.array[13]*e+this.array[15]*r,-this.array[8]*i+this.array[9]*e-this.array[11]*r,-this.array[4]*y+this.array[5]*h-this.array[6]*n,this.array[0]*y-this.array[1]*h+this.array[2]*n,-this.array[12]*a+this.array[13]*t-this.array[14]*r,this.array[8]*a-this.array[9]*t+this.array[10]*r]);u=1/u;for(var g=0;g<f.length;++g)this.array[g]=f[g]*u;return!0},toArray:function(){return new Float32Array(this.array)},toString:function(){return"[["+this.array[0].toPrecision(5)+", "+this.array[1].toPrecision(5)+", "+this.array[2].toPrecision(5)+", "+this.array[3].toPrecision(5)+"], ["+this.array[4].toPrecision(5)+", "+this.array[5].toPrecision(5)+", "+this.array[6].toPrecision(5)+", "+this.array[7].toPrecision(5)+"], ["+this.array[8].toPrecision(5)+", "+this.array[9].toPrecision(5)+", "+this.array[10].toPrecision(5)+", "+this.array[11].toPrecision(5)+"], ["+this.array[12].toPrecision(5)+", "+this.array[13].toPrecision(5)+", "+this.array[14].toPrecision(5)+", "+this.array[15].toPrecision(5)+"]]"}},glacier.Vector2=function(r,t){glacier.union.call(this,["x","u"],"number"==typeof r?r:0),glacier.union.call(this,["y","v"],"number"==typeof t?t:0)},glacier.Vector2.prototype={add:function(r){return r instanceof glacier.Vector2?(this.x+=r.x,this.y+=r.y):"number"==typeof r?(this.x+=r,this.y+=r):glacier.error("INVALID_PARAMETER",{parameter:typeof r,expected:"number or Vector2",method:"Vector2.add"}),this},assign:function(r,t){return"number"==typeof r&&"number"==typeof t?(this.x=r,this.y=t):glacier.error("INVALID_PARAMETER",{parameter:typeof r+", "+typeof t,expected:"numbers",method:"Vector2.assign"}),this},distance:function(r){var t=this.x-r.x,e=this.y-r.y;return Math.sqrt(t*t+e*e)},divide:function(r){return r instanceof glacier.Vector2?(this.x/=r.x,this.y/=r.y):"number"==typeof r?(this.x/=r,this.y/=r):glacier.error("INVALID_PARAMETER",{parameter:typeof r,expected:"number or Vector2",method:"Vector2.divide"}),this},dotProduct:function(r){return this.x*r.x+this.y*r.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},multiply:function(r){return r instanceof glacier.Vector2?(this.x*=r.x,this.y*=r.y):"number"==typeof r?(this.x*=r,this.y*=r):glacier.error("INVALID_PARAMETER",{parameter:typeof r,expected:"number or Vector2",method:"Vector2.multiply"}),this},normalize:function(){var r=1/this.length();return this.x*=r,this.y*=r,this},rotate:function(r){var t=Math.cos(r),e=Math.sin(r),a=this.x*t-this.y*e,i=this.x*e+this.y*t;return this.x=a,this.y=i,this},subtract:function(r){return r instanceof glacier.Vector2?(this.x-=r.x,this.y-=r.y):"number"==typeof r?(this.x-=r,this.y-=r):glacier.error("INVALID_PARAMETER",{parameter:typeof r,expected:"number or Vector2",method:"Vector2.subtract"}),this},toArray:function(){return new Float32Array([this.x,this.y])},toString:function(){return"("+this.x+", "+this.y+")"}},glacier.Vector3=function(r,t,e){glacier.union.call(this,["x","u"],"number"==typeof r?r:0),glacier.union.call(this,["y","v"],"number"==typeof t?t:0),glacier.union.call(this,["z","w"],"number"==typeof e?e:0)},glacier.Vector3.prototype={add:function(r){return r instanceof glacier.Vector3?(this.x+=r.x,this.y+=r.y,this.z+=r.z):"number"==typeof r?(this.x+=r,this.y+=r,this.z+=r):glacier.error("INVALID_PARAMETER",{parameter:typeof r,expected:"number or Vector3",method:"Vector3.add"}),this},angle:function(r){var t=Math.acos(this.dotProduct(r)/(this.length()*r.length()));return isNaN(t)?0:t},assign:function(r,t,e){return"number"==typeof r&&"number"==typeof t&&"number"==typeof e?(this.x=r,this.y=t,this.z=e):glacier.error("INVALID_PARAMETER",{parameter:typeof r+", "+typeof t+", "+typeof e,expected:"numbers",method:"Vector3.assign"}),this},crossProduct:function(r){return new glacier.Vector3(this.y*r.z-this.z*r.y,this.z*r.x-this.x*r.z,this.x*r.y-this.y*r.x)},distance:function(r){var t=this.x-r.x,e=this.y-r.y,a=this.z-r.z;return Math.sqrt(t*t+e*e+a*a)},divide:function(r){return r instanceof glacier.Vector3?(this.x/=r.x,this.y/=r.y,this.z/=r.z):"number"==typeof r?(this.x/=r,this.y/=r,this.z/=r):r instanceof glacier.Matrix33?(this.x=this.x/r.element(0,0)+this.y/r.element(0,1)+this.z/r.element(0,2),this.y=this.x/r.element(1,0)+this.y/r.element(1,1)+this.z/r.element(1,2),this.z=this.x/r.element(2,0)+this.y/r.element(2,1)+this.z/r.element(2,2)):r instanceof glacier.Matrix44?(this.x=this.x/r.element(0,0)+this.y/r.element(0,1)+this.z/r.element(0,2)+r.element(0,3),this.y=this.x/r.element(1,0)+this.y/r.element(1,1)+this.z/r.element(1,2)+r.element(1,3),this.z=this.x/r.element(2,0)+this.y/r.element(2,1)+this.z/r.element(2,2)+r.element(2,3)):glacier.error("INVALID_PARAMETER",{parameter:typeof r,expected:"number, Vector3, Matrix33 or Matrix44",method:"Vector3.divide"}),this},dotProduct:function(r){return this.x*r.x+this.y*r.y+this.z*r.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},multiply:function(r){return r instanceof glacier.Vector3?(this.x*=r.x,this.y*=r.y,this.z*=r.z):"number"==typeof r?(this.x*=r,this.y*=r,this.z*=r):r instanceof glacier.Matrix33?(this.x=this.x*r.element(0,0)+this.y*r.element(0,1)+this.z*r.element(0,2),this.y=this.x*r.element(1,0)+this.y*r.element(1,1)+this.z*r.element(1,2),this.z=this.x*r.element(2,0)+this.y*r.element(2,1)+this.z*r.element(2,2)):r instanceof glacier.Matrix44?(this.x=this.x*r.element(0,0)+this.y*r.element(0,1)+this.z*r.element(0,2)+r.element(0,3),this.y=this.x*r.element(1,0)+this.y*r.element(1,1)+this.z*r.element(1,2)+r.element(1,3),this.z=this.x*r.element(2,0)+this.y*r.element(2,1)+this.z*r.element(2,2)+r.element(2,3)):glacier.error("INVALID_PARAMETER",{parameter:typeof r,expected:"number, Vector3, Matrix33 or Matrix44",method:"Vector3.multiply"}),this},normalize:function(){var r=1/this.length();return this.x*=r,this.y*=r,this.z*=r,this},rotateX:function(r){var t=Math.cos(r),e=Math.sin(r),a=this.y*t-this.z*e,i=this.y*e+this.z*t;return this.y=a,this.z=i,this},rotateY:function(r){var t=Math.cos(r),e=Math.sin(r),a=this.x*t-this.z*e,i=this.x*e+this.z*t;return this.x=a,this.z=i,this},rotateZ:function(r){var t=Math.cos(r),e=Math.sin(r),a=this.x*t-this.y*e,i=this.x*e+this.y*t;return this.x=a,this.y=i,this},subtract:function(r){return r instanceof glacier.Vector3?(this.x-=r.x,this.y-=r.y,this.z-=r.z):"number"==typeof r?(this.x-=r,this.y-=r,this.z-=r):glacier.error("INVALID_PARAMETER",{parameter:typeof r,expected:"number or Vector3",method:"Vector3.subtract"}),this},toArray:function(){return new Float32Array([this.x,this.y,this.z])},toString:function(){return"("+this.x+", "+this.y+", "+this.z+")"}};