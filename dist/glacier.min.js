var glacier={VERSION:"0.0.1"};"object"==typeof module&&(module.exports=glacier),glacier.isArray=function(r){return r instanceof Array||r instanceof Float32Array},glacier.colors={WHITE:16777215,SILVER:12632256,GRAY:8421504,BLACK:0,RED:16711680,MAROON:8388608,YELLOW:16776960,OLIVE:8421376,LIME:65280,GREEN:32768,AQUA:65535,TEAL:32896,BLUE:255,NAVY:128,FUSCIA:16711935,PURPLE:8388736},glacier.EPSILON=1e-4,glacier.compare=function(r,t){var a,i=glacier.isArray(r),e=glacier.isArray(t);if(!i||!e){if(i||e){var s=i?r:t,h=i?t:r;for(a=0;a<r.length;++a)if("number"==typeof s[a]&&"number"==typeof h){if(Math.abs(s[a]-h)>=glacier.EPSILON)return!1}else if(s[a]!==h)return!1;return!0}return"number"==typeof r&&"number"==typeof t?Math.abs(r-t)<glacier.EPSILON:r===t}if(r.length==t.length){for(a=0;a<r.length;++a)if("number"==typeof r[a]&&"number"==typeof t[a]){if(Math.abs(r[a]-t[a])>=glacier.EPSILON)return!1}else if(r!==t)return!1;return!0}return!1},glacier.Matrix33=function(r){this.array=new Float32Array([1,0,0,0,1,0,0,0,1]),r&&this.assign(r)},glacier.Matrix33.prototype={assign:function(r){var t,a,i;if(r instanceof glacier.Matrix33)for(i in r.array)this.array[i]=r.array[i];else if(r instanceof glacier.Matrix44)for(a=0;3>a;++a)for(t=0;3>t;++t)this.array[3*a+t]=r.array[4*a+t];else if(glacier.isArray(r)&&9==r.length)for(i=0;i<r.length;++i)this.array[i]=r[i];else if("number"==typeof r)for(i in this.array)this.array[i]=r;else console.warn("Invalid parameter type for glacier.Matrix33.assign: "+typeof r+" (expected Matrix33, Matrix44, array[9] or number)");return this},determinant:function(){return this.array[0]*(this.array[4]*this.array[8]-this.array[5]*this.array[7])-this.array[1]*(this.array[3]*this.array[8]-this.array[5]*this.array[6])+this.array[2]*(this.array[3]*this.array[7]-this.array[4]*this.array[6])},element:function(r,t){if("number"==typeof t&&"number"==typeof r){if(t>=0&&3>=t&&r>=0&&3>=r)return this.array[3*r+t]}else if("number"==typeof r)return this.array[r];return void console.warn("Element out of range in glacier.Matrix33.element: "+(r+(t||0))+" (expected range 0-9)")},multiply:function(r){var t,a,i,e;if(r instanceof glacier.Matrix33){for(e=new Float32Array(9),t=0;3>t;++t)for(a=0;3>a;++a)e[3*t+a]=this.array[3*t+0]*r.array[0+a]+this.array[3*t+1]*r.array[3+a]+this.array[3*t+2]*r.array[6+a];this.array=e}else if(r instanceof glacier.Matrix44)e=new glacier.Matrix33(r),this.multiply(e);else if("number"==typeof r)for(i in this.array)this.array[i]*=r;else console.warn("Invalid parameter type for glacier.Matrix33.multiply: "+typeof r+" (expected Matrix33, Matrix44 or number)");return this},transpose:function(){var r;return r=this.array[1],this.array[1]=this.array[3],this.array[3]=r,r=this.array[2],this.array[2]=this.array[6],this.array[6]=r,r=this.array[5],this.array[5]=this.array[7],this.array[7]=r,this},invert:function(){var r=new Float32Array([this.array[4]*this.array[8]-this.array[5]*this.array[7],this.array[2]*this.array[7]-this.array[1]*this.array[8],this.array[1]*this.array[5]-this.array[2]*this.array[4],this.array[5]*this.array[6]-this.array[3]*this.array[8],this.array[0]*this.array[8]-this.array[2]*this.array[6],this.array[2]*this.array[3]-this.array[0]*this.array[5],this.array[3]*this.array[7]-this.array[4]*this.array[6],this.array[1]*this.array[6]-this.array[0]*this.array[7],this.array[0]*this.array[4]-this.array[1]*this.array[3]]),t=this.array[0]*r[0]-this.array[1]*r[3]+this.array[2]*r[6];if(Math.abs(t)<glacier.EPSILON)return!1;t=1/t;for(var a in r)this.array[a]=r[a]*t;return!0},toArray:function(){return new Float32Array(this.array)},toString:function(){return"[["+this.array[0].toPrecision(5)+", "+this.array[1].toPrecision(5)+", "+this.array[2].toPrecision(5)+"], ["+this.array[3].toPrecision(5)+", "+this.array[4].toPrecision(5)+", "+this.array[5].toPrecision(5)+"], ["+this.array[6].toPrecision(5)+", "+this.array[7].toPrecision(5)+", "+this.array[8].toPrecision(5)+"]]"}},glacier.Matrix44=function(r){this.array=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),r&&this.assign(r)},glacier.Matrix44.prototype={assign:function(r){var t,a,i;if(r instanceof glacier.Matrix33){for(a=0;3>a;++a)for(t=0;3>t;++t)this.array[4*a+t]=r.array[3*a+t];this.array[3]=this.array[7]=this.array[11]=0,this.array[12]=this.array[13]=this.array[14]=0,this.array[16]=1}else if(r instanceof glacier.Matrix44)for(i in r.array)this.array[i]=r.array[i];else if(glacier.isArray(r)&&16==r.length)for(i=0;i<r.length;++i)this.array[i]=r[i];else if("number"==typeof r)for(i in this.array)this.array[i]=r;else console.warn("Invalid parameter type for glacier.Matrix44.assign: "+typeof r+" (expected Matrix33, Matrix44, array[16] or number)");return this},determinant:function(){var r=this.array[0]*this.array[5]-this.array[1]*this.array[4],t=this.array[0]*this.array[6]-this.array[2]*this.array[4],a=this.array[0]*this.array[7]-this.array[3]*this.array[4],i=this.array[1]*this.array[6]-this.array[2]*this.array[5],e=this.array[1]*this.array[7]-this.array[3]*this.array[5],s=this.array[2]*this.array[7]-this.array[3]*this.array[6],h=this.array[8]*this.array[13]-this.array[9]*this.array[12],y=this.array[8]*this.array[14]-this.array[10]*this.array[12],n=this.array[8]*this.array[15]-this.array[11]*this.array[12],o=this.array[9]*this.array[14]-this.array[10]*this.array[13],c=this.array[9]*this.array[15]-this.array[11]*this.array[13],l=this.array[10]*this.array[15]-this.array[11]*this.array[14];return r*l-t*c+a*o+i*n-e*y+s*h},element:function(r,t){if("number"==typeof t&&"number"==typeof r){if(t>=0&&4>=t&&r>=0&&4>=r)return this.array[4*r+t]}else if("number"==typeof r)return this.array[r];return void console.warn("Element out of range in glacier.Matrix33.element: "+(r+(t||0))+" (expected range 0-16)")},multiply:function(r){var t,a,i,e;if(r instanceof glacier.Matrix44){for(e=new Float32Array(16),t=0;4>t;++t)for(a=0;4>a;++a)e[4*t+a]=this.array[4*t+0]*r.array[0+a]+this.array[4*t+1]*r.array[4+a]+this.array[4*t+2]*r.array[8+a]+this.array[4*t+3]*r.array[12+a];this.array=e}else if(r instanceof glacier.Matrix33)e=new glacier.Matrix44(r),this.multiply(e);else if("number"==typeof r)for(i in this.array)this.array[i]*=r;else console.warn("Invalid parameter type for glacier.Matrix4.multiply: "+typeof r+" (expected Matrix44, Matrix33 or number)");return this},transpose:function(){var r;return r=this.array[1],this.array[1]=this.array[4],this.array[4]=r,r=this.array[2],this.array[2]=this.array[8],this.array[8]=r,r=this.array[3],this.array[3]=this.array[12],this.array[12]=r,r=this.array[6],this.array[6]=this.array[9],this.array[9]=r,r=this.array[7],this.array[7]=this.array[13],this.array[13]=r,r=this.array[11],this.array[11]=this.array[14],this.array[14]=r,this},invert:function(){var r=this.array[0]*this.array[5]-this.array[1]*this.array[4],t=this.array[0]*this.array[6]-this.array[2]*this.array[4],a=this.array[0]*this.array[7]-this.array[3]*this.array[4],i=this.array[1]*this.array[6]-this.array[2]*this.array[5],e=this.array[1]*this.array[7]-this.array[3]*this.array[5],s=this.array[2]*this.array[7]-this.array[3]*this.array[6],h=this.array[8]*this.array[13]-this.array[9]*this.array[12],y=this.array[8]*this.array[14]-this.array[10]*this.array[12],n=this.array[8]*this.array[15]-this.array[11]*this.array[12],o=this.array[9]*this.array[14]-this.array[10]*this.array[13],c=this.array[9]*this.array[15]-this.array[11]*this.array[13],l=this.array[10]*this.array[15]-this.array[11]*this.array[14],f=r*l-t*c+a*o+i*n-e*y+s*h;return Math.abs(f)<glacier.EPSILON?!1:(this.array=new Float32Array([this.array[5]*l-this.array[6]*c+this.array[7]*o,-this.array[1]*l+this.array[2]*c-this.array[3]*o,this.array[13]*s-this.array[14]*e+this.array[15]*i,-this.array[9]*s+this.array[10]*e-this.array[11]*i,-this.array[4]*l+this.array[6]*n-this.array[7]*y,this.array[0]*l-this.array[2]*n+this.array[3]*y,-this.array[12]*s+this.array[14]*a-this.array[15]*t,this.array[8]*s-this.array[10]*a+this.array[11]*t,this.array[4]*c-this.array[5]*n+this.array[7]*h,-this.array[0]*c+this.array[1]*n-this.array[3]*h,this.array[12]*e-this.array[13]*a+this.array[15]*r,-this.array[8]*e+this.array[9]*a-this.array[11]*r,-this.array[4]*o+this.array[5]*y-this.array[6]*h,this.array[0]*o-this.array[1]*y+this.array[2]*h,-this.array[12]*i+this.array[13]*t-this.array[14]*r,this.array[8]*i-this.array[9]*t+this.array[10]*r]),!0)},toArray:function(){return new Float32Array(this.array)},toString:function(){return"[["+this.array[0].toPrecision(5)+", "+this.array[1].toPrecision(5)+", "+this.array[2].toPrecision(5)+", "+this.array[3].toPrecision(5)+"], ["+this.array[4].toPrecision(5)+", "+this.array[5].toPrecision(5)+", "+this.array[6].toPrecision(5)+", "+this.array[7].toPrecision(5)+"], ["+this.array[8].toPrecision(5)+", "+this.array[9].toPrecision(5)+", "+this.array[10].toPrecision(5)+", "+this.array[11].toPrecision(5)+"], ["+this.array[12].toPrecision(5)+", "+this.array[13].toPrecision(5)+", "+this.array[14].toPrecision(5)+", "+this.array[15].toPrecision(5)+"]]"}},glacier.Vector2=function(r,t){this.x="number"==typeof r?r:0,this.y="number"==typeof t?t:0},glacier.Vector2.prototype={add:function(r){return r instanceof glacier.Vector2?(this.x+=r.x,this.y+=r.y):"number"==typeof r?(this.x+=r,this.y+=r):console.warn("Invalid parameter type for glacier.Vector2.add: "+typeof r+" (expected number or Vector2)"),this},assign:function(r,t){return"number"==typeof r&&"number"==typeof t?(this.x=r,this.y=t):console.warn("Invalid parameter types for glacier.Vector2.assign: "+typeof r+", "+typeof t+" (expected two numbers)"),this},distance:function(r){var t=this.x-r.x,a=this.y-r.y;return Math.sqrt(t*t+a*a)},divide:function(r){return r instanceof glacier.Vector2?(this.x/=r.x,this.y/=r.y):"number"==typeof r?(this.x/=r,this.y/=r):console.warn("Invalid parameter type for glacier.Vector2.divide: "+typeof r+" (expected number or Vector2)"),this},dotProduct:function(r){return this.x*r.x+this.y*r.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},multiply:function(r){return r instanceof glacier.Vector2?(this.x*=r.x,this.y*=r.y):"number"==typeof r?(this.x*=r,this.y*=r):console.warn("Invalid parameter type for glacier.Vector2.multiply: "+typeof r+" (expected number or Vector2)"),this},normalize:function(){var r=1/this.length();return this.x*=r,this.y*=r,this},rotate:function(r){var t=Math.cos(r),a=Math.sin(r),i=this.x*t-this.y*a,e=this.x*a+this.y*t;return this.x=i,this.y=e,this},subtract:function(r){return r instanceof glacier.Vector2?(this.x-=r.x,this.y-=r.y):"number"==typeof r?(this.x-=r,this.y-=r):console.warn("Invalid parameter type for glacier.Vector2.subtract: "+typeof r+" (expected number or Vector2)"),this},toArray:function(){return new Float32Array([this.x,this.y])},toString:function(){return"("+this.x+", "+this.y+")"},u:function(){return this.x},v:function(){return this.y}},glacier.Vector3=function(r,t,a){this.x="number"==typeof r?r:0,this.y="number"==typeof t?t:0,this.z="number"==typeof a?a:0},glacier.Vector3.prototype={add:function(r){return r instanceof glacier.Vector3?(this.x+=r.x,this.y+=r.y,this.z+=r.z):"number"==typeof r?(this.x+=r,this.y+=r,this.z+=r):console.warn("Invalid parameter type for glacier.Vector3.add: "+typeof r+" (expected number or Vector3)"),this},angle:function(r){var t=Math.acos(this.dotProduct(r)/(this.length()*r.length()));return isNaN(t)?0:t},assign:function(r,t,a){return"number"==typeof r&&"number"==typeof t&&"number"==typeof a?(this.x=r,this.y=t,this.z=a):console.warn("Invalid parameter types for glacier.Vector.assign: "+typeof r+", "+typeof t+", "+typeof a+" (expected three numbers)"),this},crossProduct:function(r){return new glacier.Vector3(this.y*r.z-this.z*r.y,this.z*r.x-this.x*r.z,this.x*r.y-this.y*r.x)},distance:function(r){var t=this.x-r.x,a=this.y-r.y,i=this.z-r.z;return Math.sqrt(t*t+a*a+i*i)},divide:function(r){return r instanceof glacier.Vector3?(this.x/=r.x,this.y/=r.y,this.z/=r.z):"number"==typeof r?(this.x/=r,this.y/=r,this.z/=r):r instanceof glacier.Matrix33?(this.x=this.x/r.element(0,0)+this.y/r.element(0,1)+this.z/r.element(0,2),this.y=this.x/r.element(1,0)+this.y/r.element(1,1)+this.z/r.element(1,2),this.z=this.x/r.element(2,0)+this.y/r.element(2,1)+this.z/r.element(2,2)):r instanceof glacier.Matrix44?(this.x=this.x/r.element(0,0)+this.y/r.element(0,1)+this.z/r.element(0,2)+r.element(0,3),this.y=this.x/r.element(1,0)+this.y/r.element(1,1)+this.z/r.element(1,2)+r.element(1,3),this.z=this.x/r.element(2,0)+this.y/r.element(2,1)+this.z/r.element(2,2)+r.element(2,3)):console.warn("Invalid parameter type for glacier.Vector3.divide: "+typeof r+" (expected number, Vector3, Matrix33 or Matrix44)"),this},dotProduct:function(r){return this.x*r.x+this.y*r.y+this.z*r.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},multiply:function(r){return r instanceof glacier.Vector3?(this.x*=r.x,this.y*=r.y,this.z*=r.z):"number"==typeof r?(this.x*=r,this.y*=r,this.z*=r):r instanceof glacier.Matrix33?(this.x=this.x*r.element(0,0)+this.y*r.element(0,1)+this.z*r.element(0,2),this.y=this.x*r.element(1,0)+this.y*r.element(1,1)+this.z*r.element(1,2),this.z=this.x*r.element(2,0)+this.y*r.element(2,1)+this.z*r.element(2,2)):r instanceof glacier.Matrix44?(this.x=this.x*r.element(0,0)+this.y*r.element(0,1)+this.z*r.element(0,2)+r.element(0,3),this.y=this.x*r.element(1,0)+this.y*r.element(1,1)+this.z*r.element(1,2)+r.element(1,3),this.z=this.x*r.element(2,0)+this.y*r.element(2,1)+this.z*r.element(2,2)+r.element(2,3)):console.warn("Invalid parameter type for glacier.Vector3.multiply: "+typeof r+" (expected number, Vector3, Matrix33 or Matrix44)"),this},normalize:function(){var r=1/this.length();return this.x*=r,this.y*=r,this.z*=r,this},rotateX:function(r){var t=Math.cos(r),a=Math.sin(r),i=this.y*t-this.z*a,e=this.y*a+this.z*t;return this.y=i,this.z=e,this},rotateY:function(r){var t=Math.cos(r),a=Math.sin(r),i=this.x*t-this.z*a,e=this.x*a+this.z*t;return this.x=i,this.z=e,this},rotateZ:function(r){var t=Math.cos(r),a=Math.sin(r),i=this.x*t-this.y*a,e=this.x*a+this.y*t;return this.x=i,this.y=e,this},subtract:function(r){return r instanceof glacier.Vector3?(this.x-=r.x,this.y-=r.y,this.z-=r.z):"number"==typeof r?(this.x-=r,this.y-=r,this.z-=r):console.warn("Invalid parameter type for glacier.Vector3.subtract: "+typeof r+" (expected number or Vector3)"),this},toArray:function(){return new Float32Array([this.x,this.y,this.z])},toString:function(){return"("+this.x+", "+this.y+", "+this.z+")"},u:function(){return this.x},v:function(){return this.y},w:function(){return this.z}};